<!doctype html>
<html class="sl-theme-dark">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auction Draft</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.16.0/cdn/themes/light.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.16.0/cdn/themes/dark.css" />
    <link rel="stylesheet" href="/style.css" />
    <style>
      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
      }

      /* Inline terminal-style welcome message (placed in page flow) */
      .welcome-terminal {
        font-family: Consolas, 'Courier New', monospace;
        background: #002b36; /* deep terminal-like blue */
        color: #cfe8ff;
        padding: 0.8rem 1.2rem;
        border: 1px solid black;
  width: min(54%, 34ch); /* slightly narrower */
        box-sizing: border-box;
        border-radius: 0.125rem;
        margin: 1.25rem 0;
        display: flex;
        align-items: center;
        justify-content: flex-start; /* start left-aligned */
        gap: 0.5rem;
        font-size: 1.15rem; /* slightly larger overall */
      }

      /* allow dark-theme override */
      .sl-theme-dark .welcome-terminal {
        background: #001018;
        color: #bfe7ff;
      }

      #welcome-text {
        font-weight: 700;
        font-size: 1.2rem; /* larger font for the typed text */
        white-space: pre; /* preserve spaces if any */
        overflow: hidden;
        display: inline-block;
        text-align: left; /* left-align while typing */
      }

      /* NOTE: removed inner wrapper - text types left-aligned directly in the terminal */

      /* Block caret that blinks while typing */
      #welcome-caret {
        display: inline-block;
        width: 0.5ch;
        line-height: 1;
        animation: blink 1s steps(1, end) infinite;
      }

      @keyframes blink {
        50% { opacity: 0; }
      }
      .sl-theme-dark .invert-in-dark-mode {
        filter: invert(1);
      }
      .sl-theme-dark sl-button[variant='neutral']::part(label) {
        color: white;
      }
      .control-button {
        --sl-spacing-x-small: 0;
      }
      .control-button::part(base) {
        width: 3rem;
        height: 1rem;
        justify-content: center;
      }
      .main-button {
        width: 15rem;
        margin-bottom: 1rem;
      }
    </style>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.16.0/cdn/components/button/button.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.16.0/cdn/components/icon-button/icon-button.js"></script>
  </head>
  <body>
    <div class="welcome-terminal"><span id="welcome-text"></span><span id="welcome-caret" aria-hidden="true">█</span></div>
    <div style="display: flex; flex-direction: column; align-items: center;">
      <sl-button class="main-button" size="large" onclick="window.location.href='/setup'">Auction Setup</sl-button>
      <sl-button id="resource-mode-btn" class="main-button" size="large">Resource Dex</sl-button>
      <sl-button class="main-button" size="large" onclick="window.open('/assets/boss-battles.html', '_blank')">Boss Battles</sl-button>
    </div>

    <form id="resource-mode-form" method="post" action="new-auction" enctype="multipart/form-data" style="display: none;">
      <input name="resourceMode" value="true" />
      <input name="useDefaultCsv" value="true" />
    </form>

    <div style="position: fixed; bottom: 1rem; right: 1rem; display: flex; gap: 0.5rem">
      <sl-button id="drive-button" class="control-button" variant="neutral" title="Open Google Drive Folder">
        <img src="/generic/Drive.png" alt="Open Google Drive" style="height: 1.4rem; position: relative; top: 5px;" />
      </sl-button>
      <sl-button id="github-button" class="control-button" variant="neutral" title="Open GitHub Repository">
        <img class="invert-in-dark-mode" src="/generic/Github.png" alt="Open GitHub Repository" style="height: 1.4rem; position: relative; top: 5px;" />
      </sl-button>
      <sl-button id="youtube-button" class="control-button" variant="neutral" title="Open YouTube Channel">
        <img class="invert-in-dark-mode" src="/generic/Youtube.png" alt="YouTube" style="height: 1.7rem; position: relative; top: 4px;" />
      </sl-button>
      <sl-button id="tierlist-button" class="control-button" variant="neutral" title="View Tierlist">
        <img class="invert-in-dark-mode" src="/generic/TierIcon.png" alt="View Tierlist" style="height: 1.4rem; position: relative; top: 5px;" />
      </sl-button>
      <sl-button id="patchnotes-button" class="control-button" variant="neutral" title="View Patch Notes" onclick="window.location.href='/patchnotes'">
        <img class="invert-in-dark-mode" src="/generic/pencil.png" alt="Patch Notes" style="height: 1.4rem; position: relative; top: 5px;" />
      </sl-button>
      <sl-button id="dark-mode-toggle" class="control-button" variant="neutral"></sl-button>
    </div>

    <script type="module">
      await customElements.whenDefined('sl-button');

      // --- Dark Mode Logic ---
      const darkModeToggle = document.getElementById('dark-mode-toggle');
      const htmlEl = document.documentElement;

      function applyTheme(theme) {
        if (theme === 'dark') {
          htmlEl.classList.add('sl-theme-dark');
          darkModeToggle.innerHTML = '<img src="/MiniIcons/solrock.png" alt="Light Mode" style="height: 1.4rem; position: relative; top: 6px;">';
        } else {
          htmlEl.classList.remove('sl-theme-dark');
          darkModeToggle.innerHTML = '<img src="/MiniIcons/lunatone.png" alt="Dark Mode" style="height: 1.4rem; position: relative; top: 6px;">';
        }
      }

    const savedTheme = localStorage.getItem('theme') || 'dark';
      applyTheme(savedTheme);

      darkModeToggle.addEventListener('click', () => {
        const newTheme = htmlEl.classList.contains('sl-theme-dark') ? 'light' : 'dark';
        localStorage.setItem('theme', newTheme);
        applyTheme(newTheme);
      });
      // --- End Dark Mode Logic ---

      document.getElementById('resource-mode-btn').addEventListener('click', () => {
        document.getElementById('resource-mode-form').submit();
      });

      // Drive button listener
      document.getElementById('drive-button').addEventListener('click', () => {
        window.open('https://drive.google.com/drive/folders/1yY2AyLuR07CZCNowcPN22HTWS1184ZOx?usp=sharing', '_blank');
      });

      // GitHub button listener
      document.getElementById('github-button').addEventListener('click', () => {
        window.open('https://github.com/FranklyNathan/EmeraldBlitz', '_blank');
      });

      // YouTube button listener
      const ytBtn = document.getElementById('youtube-button');
      if (ytBtn) {
        ytBtn.addEventListener('click', () => {
          window.open('https://www.youtube.com/@PkmnEmeraldBlitz', '_blank');
        });
      }

      // Tierlist button is present but will need a dialog added to this page if it's intended to work here.
      // For now, it does nothing.
    </script>
    <script>
      // Terminal-style typewriter welcome text (left-aligned)
      (function () {
        const text = 'Welcome to Emerald Blitz.';
        const el = document.getElementById('welcome-text');
        const caret = document.getElementById('welcome-caret');

        // make page visible immediately so typing is visible
        document.body.classList.add('ready');

        if (!el) return;

        let i = 0;
        const baseDelay = 60; // base ms per character

        function getDelay() {
          // small random jitter to make typing feel organic
          return baseDelay + Math.floor(Math.random() * 70) - 20;
        }

        function step() {
          if (i <= text.length) {
            el.textContent = text.slice(0, i);
            i += 1;
            setTimeout(step, getDelay());
          } else {
            // finished typing — leave caret blinking
          }
        }

        // start typing shortly after load so the rest of the page paints
        setTimeout(step, 120);
      })();
    </script>
  </body>
</html>